---
layout: post
comments: True
title: Whittling The Output Down
---

Yesterday Thom and I finished running dolphot on all 13 sets of images. Big thanks to our computers for their hours and hours of toil looking at many millions of "stars". Now we have to step back and figure out how to find the really important stars from these long lists of possible objects. Yesterday I figured out how to use the text utility awk to produce a new file with only some of the rows from the original huge file. I had no luck using object type to whittle the list into something of reasonable length, and thought perhaps chi would be a good value to use to screen the objects since it has to do with how much they look like the PSF of an actual star. This morning, reading through the dolphot manual however, I noticed that it specifically warns against using chi as an absolute quality indicator. Saying, "Because they depend very heavily on how well you have tuned the NoiseMult parameter, the Ï‡ values tend to be unreliable for measuring goodness of fit." I am not going to use chi as a singular cutoff. So we still need to find something that we will be able to cutoff based on.

I spoke with Dr. G about what parameters would be good to cutoff based on. She said that sharpness will be a good place to start. The objects with star-like sharpness have a value close to zero. I ran awk on the Dolphot output and put objects with a sharpness of zero into a new file and got 16k objects in this file. This is cool, because even though it is still probably more stars than there really are in the field, it is less than 10% of the original dataset. I am going to see about using roundness or another parameter to further cull the list.

I just realized, upon checking out the list of columns that the column I originally sorted the data with was actual the sharpness of the 814 filter NOT the object sharpness. Redoing the awk to get objects with a zero for *object* sharpness I get a list with a mere 502 objects.

While it is nice that I have a shorter list of objects, this confusion between columns brings me to a bigger confusion of the dolphot output. There is general data on the first columns. Then the columns give 814 data (which I don't really understand the purpose/meaning of) Then the columns give specific data about each image. I understand that the same star shows up in multiple images, and since they are different exposures there will be slightly different associated with each image. I guess I would just like a greater explanation from the manual of how the general values are computed from each image's individual values. Some values make no sense to me also, like the photometry quality flags. The manual explains error flags as follows "In general, star errors of types 1-3 are usable; if the error flag is 4 or higher, it is unusable. Star errors of types 4-7 may be usable, if charge from the saturated pixels does not leak into adjacent pixels. If precision photometry is required, only error flags of zero or perhaps one should be used." For the general value column, most values are zero, with a few ones and twos, but the image-specific quality flags are mostly 9s and 12s, which have no meaning to me based on the dolphot manual. Basically I am just still a bit confused about this huge dolphot output.

In my quest for better explanation I did find something that nicely synthesized the extraneous object culling process in the wfc3 module manual. Dolphin writes "As with all photometry, you will need to trim your detection list to eliminate objects classified as non-stellar, low signal-to-noise, or bad photometry quality." It is nice to see this concise synthesis. Based on my current understanding of dolphot's output, I think it would make sense to first cut down to a few thousand objects based on the general object sharpness column perhaps keeping sharpnesses of -.001 to .001 or something like that, then reject objects with a signal to noise ratio (SNR) below a threshold, then reject objects with quality flags of any kind (1-7).

I looked into what may be a good SNR threshold and it looks like there is a parameter in dolphot: "sigpsf" that specifies the SNR above which a source must be to get a psf fit to it. The recommended value is 5. Looking at the output, however, I can see that a lot of objects have SNRs below 5. I am not going to question the veracity of dolphot for labeling these objects type 1 (likely stars with good psf fits). But I think it would be reasonable to call our SNR threshold 5 and thus reject the objects with SNRs below 5.

I executed a series of awk commands to get just the -.001 to .001 sharpness, SNR>5, zero quality flagged objects. After running the sharpness cut, there were about 1500 objects, then with the snr cut, it was down to just over 1000 then cutting anything with a quality flag I got it down to 887 objects.

I am a little worried that I am cutting the sharpness too strictly, but keeping the recommended -.3 to .3 would be at least 100k objects and I just want to be selective and feel like sharpness is the best factor to use to be selective. I am just not sure how to know if I am being too selective or not selective enough. Anyway, I am out of time for today, but I am happy with the work that has happened today. Tomorrow I hope to spend some time figuring out how to interpret and display the culled list of objects. I will also write a reflection at some point this weekend as I haven't written one since before I left for home.
